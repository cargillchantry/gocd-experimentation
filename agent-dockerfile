FROM gocd/gocd-agent-alpine-3.10:v20.8.0

USER root
RUN apk update
RUN apk add --no-cache openjdk11 gradle maven
RUN apk add --no-cache curl && \
    curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.19.2/bin/linux/amd64/kubectl && \
    mv kubectl /usr/bin/kubectl && \
    chmod +x /usr/bin/kubectl

ENTRYPOINT ["/docker-entrypoint.sh"]
USER go
